(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{38:function(t,e,s){"use strict";s.r(e);var i=s(39),r=s.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(n);e.default=r.a},39:function(t,e,s){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}),n=this&&this.__decorate||function(t,e,s,i){var r,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,s,a):r(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=s(70),c=a(s(10)),l=s(69),u=a(s(3));s(62);var p=s(20),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.host_port="http://"+u.default.dev.host+":"+u.default.dev.servePort,e.currentUrl="",e.skipID="",e.setid="",e.data={replyCount:"",ptime:""},e.html_structure="",e.pictureArr=null,e.key="article",e}return r(e,t),e.prototype.created=function(){this.skipID=this.$route.query.skipID;var t=this.$route.query.photosetID,e=this.$route.query.docid;this.setid=this.$route.query.setid;var s=this.$route.query.skipType;if(this.setid)this.currentUrl="http://c.m.163.com/photo/api/set/0096/"+this.setid+".json",this.key="pic";else if(t){var i="";i=(i=t.slice(4)).replace(/\|/,"/"),this.currentUrl="http://c.3g.163.com/photo/api/set/"+i+".json",this.key="picture"}else e&&(this.currentUrl="http://c.m.163.com/nc/article/"+e+"/full.html",this.key="dz"===s?"dz":"article");this.getData()},e.prototype.mounted=function(){var t=this,e=document.getElementById("newsDetailContent");e&&(e.onscroll=p.debounce(this.loadImg,300)),this.$nextTick((function(){t.loadImg()}))},e.prototype.updated=function(){this.pictureNews(),this.articleNews(),this.loadImg()},e.prototype.getData=function(){var t=this;c.default.showLoading(!0),this.$http.jsonp(this.host_port+"?key=wy&url="+this.currentUrl).then((function(e){c.default.showLoading(!1);try{if(e=JSON.parse(JSON.parse(e.body)),t.setid)t.data=e,t.pictureArr=e.photos;else if(t.skipID&&t.skipID.includes("|"))t.data=e,t.pictureArr=e.photos;else{var s=t.currentUrl.split("/"),i=s[s.length-2];t.data=e[i]}console.log(["详情",t.currentUrl,t.data])}catch(e){console.log(e),c.default.confirm({text:"网络错误，请刷新重试！"},(function(){t.getData()}))}}),(function(t){console.log(t)}))},e.prototype.toComment=function(t){this.$router.push({name:"comment",query:{docid:t.docid,postid:t.postid}})},e.prototype.toSearch=function(t){this.$router.push({name:"search",query:{keyword:t.keyword}})},e.prototype.pictureNews=function(){document.getElementsByClassName("swiper-container").length&&new l.Swiper(".swiper-container",{direction:"horizontal",loop:!0,navigation:{}})},e.prototype.articleNews=function(){var t=this.data.body;if(void 0!==t){for(var e=this.data.video?this.data.video:[],s=this.data.img?this.data.img:[],i=0;i<e.length;i++)t=t.replace(e[i].ref,'<video src="'+e[i].mp4_url+"'\"></video>");for(i=0;i<s.length;i++){s[i].pixel;t=t.replace(s[i].ref,'<img data-src="'+s[i].src+'" title="'+s[i].alt+'" style="max-width: 100%;display: block;margin: 0.1rem auto"><p style="color: #888;font-size: 0.2rem;line-height: 0.2rem;margin: 0.2rem 0 0.2rem">"'+s[i].alt+'"</p>')}this.html_structure=t}},e.prototype.loadImg=function(){var t=document.getElementById("newsDetailContent");if(t)for(var e=document.querySelectorAll("#newsDetailContent img"),s=t.scrollTop,i=document.documentElement.clientHeight,r=0;r<e.length;r++){if(s+i>e[r].offsetTop-200){if(e[r].src)continue;var n=e[r].getAttribute("data-src");n&&(e[r].src=n)}}},e=n([o.Component({})],e)}(o.Vue);e.default=d},50:function(t,e,s){},63:function(t,e,s){"use strict";s(50)},71:function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return r}));var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide"}},[s("div",{attrs:{id:"newsDetailWrap"}},[s("mt-header",{staticStyle:{"z-index":"5"},attrs:{fixed:""}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.goBack},slot:"left"},[t._v("返回")]),t._v(" "),t.data.replyCount?s("mt-button",{attrs:{slot:"right"},slot:"right"},[s("div",{on:{click:function(e){return t.toComment(t.data)}}},[t._v(t._s(t.data.replyCount+"跟帖"))])]):t._e()],1),t._v(" "),"article"==t.key?s("div",{attrs:{id:"newsDetailContent"}},[s("h1",{staticClass:"title"},[t._v(t._s(t.data.title))]),t._v(" "),s("div",{attrs:{id:"secHeadWrap"}},[s("span",{staticClass:"sText",attrs:{id:"source"}},[t._v(t._s(t.data.source))]),t._v(" "),s("span",{staticClass:"sText",attrs:{id:"ptime"}},[t._v(t._s(t.data.ptime.slice(0,-3)))])]),t._v(" "),s("div",{domProps:{innerHTML:t._s(t.html_structure)}}),t._v(" "),t.data.ec?s("p",{staticClass:"sText",attrs:{id:"ec"}},[t._v(t._s("责任编辑："+t.data.ec))]):t._e(),t._v(" "),s("div",{staticClass:"searchKwList"},t._l(t.data.searchKw,(function(e,i){return s("span",{key:i,staticClass:"searchKw",on:{click:function(s){return t.toSearch(e)}}},[t._v(t._s(e.keyword))])})),0)]):t._e(),t._v(" "),"picture"==t.key?s("div",{staticClass:"imgContent swiper-container"},[s("div",{staticClass:"swiper-wrapper"},t._l(t.pictureArr,(function(e,i){return s("div",{key:i,staticClass:"swiper-slide"},[s("img",{attrs:{src:e.imgurl,alt:""}}),t._v(" "),s("div",{staticClass:"pic-des"},[s("span",{staticClass:"currentNum"},[t._v(t._s(i+1))]),t._v(" "),s("span",{staticClass:"countNum"},[t._v("/ "+t._s(t.pictureArr.length))]),t._v(" "),s("p",{staticClass:"pic-title"},[t._v(t._s(t.data.setname))]),t._v(" "),s("p",{staticClass:"pic-note sText"},[t._v("\n              "+t._s(e.imgtitle)+"\n              "+t._s(e.note)+"\n            ")])])])})),0)]):t._e(),t._v(" "),"pic"==t.key?s("div",{staticClass:"imgContent swiper-container"},[s("div",{staticClass:"swiper-wrapper"},t._l(t.pictureArr,(function(e,i){return s("div",{key:i,staticClass:"swiper-slide"},[s("img",{attrs:{src:e.imgurl,alt:""}}),t._v(" "),s("div",{staticClass:"pic-des"},[s("span",{staticClass:"currentNum"},[t._v(t._s(i+1))]),t._v(" "),s("span",{staticClass:"countNum"},[t._v("/ "+t._s(t.pictureArr.length))]),t._v(" "),s("p",{staticClass:"pic-title"},[t._v(t._s(t.data.setname))]),t._v(" "),s("p",{staticClass:"pic-note sText"},[t._v("\n              "+t._s(e.imgtitle)+"\n              "+t._s(e.note)+"\n            ")])])])})),0)]):t._e(),t._v(" "),"dz"==t.key?s("div",{attrs:{id:"dzContent"}},[s("p",{staticClass:"title"},[t._v(t._s(t.data.title))]),t._v(" "),s("div",{domProps:{innerHTML:t._s(t.html_structure)}}),t._v(" "),s("div",{staticClass:"footer"},[s("span",{staticClass:"sText"},[s("i",{staticClass:"icon laugh_icon"}),t._v("\n          "+t._s(t.data.laughWeight)+"\n        ")]),t._v(" "),s("span",{staticClass:"sText"},[s("i",{staticClass:"icon love_icon"}),t._v("\n          "+t._s(t.data.enjoyWeight)+"\n        ")]),t._v(" "),s("span",{staticClass:"sText"},[s("i",{staticClass:"icon bored_icon"}),t._v("\n          "+t._s(t.data.boredWeight)+"\n        ")])])]):t._e(),t._v(" "),s("div",{staticClass:"commentWrap"},[s("input",{staticClass:"comment-input",attrs:{type:"text",placeholder:"写跟帖"}}),t._v(" "),s("div",{staticClass:"icon comment",on:{click:function(e){return t.toComment(t.data)}}},[t._v(t._s(t.data.replyCount))]),t._v(" "),s("span",{staticClass:"icon favorite"}),t._v(" "),s("span",{staticClass:"icon share"})])],1)])},r=[];i._withStripped=!0},73:function(t,e,s){"use strict";s.r(e);var i=s(71),r=s(38);for(var n in r)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return r[t]}))}(n);s(63);var a=s(1),o=Object(a.a)(r.default,i.a,i.b,!1,null,"f398b000",null);o.options.__file="src/components/news/NewsDetail.vue",e.default=o.exports}}]);