(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{44:function(t,s,e){},56:function(t,s,e){"use strict";e(44)},77:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("mt-loadmore",{ref:"loadmore",attrs:{id:"listWrap","top-method":t.loadNew,"bottom-method":t.loadMore,"bottom-all-loaded":t.allLoaded,autoFill:!1}},t._l(t.dataList,(function(s,i){return e("div",{key:i,staticClass:"textItem",on:{click:function(e){return t.toDetail(s)}}},[e("div",{staticClass:"content"},[e("div",{staticClass:"imgWrap"},[e("img",{attrs:{src:s.imgsrc,alt:""}})]),t._v(" "),e("p",{staticClass:"des"},[t._v(t._s(s.digest))])]),t._v(" "),s.commentInfo?e("div",{staticClass:"comment"},[e("span",{staticClass:"nickname"},[t._v(t._s(s.commentInfo.user?'"'+s.commentInfo.user.nickname+"：":"***"))]),t._v(" "),e("span",[t._v(t._s(s.commentInfo.content))])]):t._e(),t._v(" "),e("div",{staticClass:"footer"},[e("span",{staticClass:"sText"},[e("i",{staticClass:"icon laugh_icon"}),t._v(t._s(s.laughweight))]),t._v(" "),e("span",{staticClass:"sText"},[e("i",{staticClass:"icon love_icon"}),t._v(t._s(s.enjoyweight))]),t._v(" "),e("span",{staticClass:"sText"},[e("i",{staticClass:"icon bored_icon"}),t._v(t._s(s.boredweight))]),t._v(" "),e("span",{staticClass:"sText"},[e("i",{staticClass:"icon comment_icon"}),t._v(t._s(s.replyCount))])])])})),0)};i._withStripped=!0;var a=e(2),o=e(4),l=e.n(o),n=e(3),r=e.n(n),c={data(){return{host_port:r.a.dev.host+":"+r.a.dev.servePort,dataList:[],title:"段子",currentUrl:l.a.urlArray[this.title],allLoaded:!1}},created:function(){if(0!=this.dataList.length)return;let t=this.$route.params.type?this.$route.params.type:this.title;this.ajaxData({title:t}),setTimeout((function(){document.getElementsByClassName("indexWrap")[0].scrollTop=0}))},watch:{},methods:{ajaxData:function(t){if(t.loadMore)this.currentUrl=this.transformUrl(this.currentUrl,"loadMore");else if(t.loadNew)this.currentUrl=this.transformUrl(this.currentUrl,"loadNew");else if(this.currentUrl=l.a.urlArray[t.title],null!=this.$store.state.news_DATA[t.title])return void(this.dataList=this.$store.state.news_DATA[t.title]);a.Indicator.open({text:"加载中...",spinnerType:"snake"}),this.$http.jsonp(this.host_port+"?key=wy&url="+this.currentUrl).then((s=>{a.Indicator.close();let e=(s=JSON.parse(JSON.parse(s.body)))[this.title];if(t.loadMore){if(this.$refs.loadmore.onBottomLoaded(),0==e.length)return void(this.allLoaded=!0)}else t.loadNew&&this.$refs.loadmore.onTopLoaded();t.loadMore?this.dataList=this.dataList.concat(e):t.loadNew?this.dataList=e.concat(this.dataList):this.dataList=e,this.$store.commit("setData",{type:"news",title:t.title,data:this.dataList}),console.log([t.title,this.currentUrl,this.dataList])}),(t=>{console.log(t)}))},loadMore:function(){this.ajaxData({title:this.title,loadMore:!0})},loadNew:function(){this.ajaxData({title:this.title,loadNew:!0})},toDetail:function(t){this.$router.push({name:"newsDetail",query:{postid:t.postid,skipID:t.skipID,docid:t.docid,photosetID:t.photosetID,setid:t.setid,skipType:"dz"}})},transformUrl:function(t,s){let e=t.split("?"),i=e[1],a=i.split("&");for(var o=0;o<a.length;o++){let t=a[o].split("=");if("loadNew"==s){if("fn"==t[0]){let s=Number(t[1]);s+=1,t[1]=s}}else if("loadMore"==s&&"offset"==t[0]){let s=Number(t[1]);s+=10,t[1]=s}a[o]=t.join("=")}i=a.join("&"),e[1]=i;let l=e.join("?");return this.currentUrl=l,console.log(l),l}}},d=(e(56),e(1)),h=Object(d.a)(c,i,[],!1,null,"a67ce832",null);h.options.__file="src/components/news/TextList.vue";s.default=h.exports}}]);